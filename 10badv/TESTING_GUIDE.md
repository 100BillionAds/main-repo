# 백억광고 플랫폼 전체 프로세스 테스트 가이드

## 🎯 테스트 시나리오: 디자이너 → 관리자 → 광고주 전체 흐름

---

## 1단계: 디자이너 - 포트폴리오 등록

### 로그인
- URL: http://localhost:3000/login
- 아이디: `design1234`
- 비밀번호: `1234`

### 포트폴리오 등록
1. 대시보드 → "내 포트폴리오" 클릭
2. "새 포트폴리오 등록" 버튼 클릭
3. 정보 입력:
   - **제목**: "프리미엄 배너 디자인"
   - **카테고리**: "배너 디자인"
   - **가격**: 50000
   - **설명**: "고급스러운 브랜드 배너 디자인입니다. 다양한 사이즈로 제공됩니다."
   - **썸네일 이미지**: 파일 선택 (jpg, png 등)
   - **추가 이미지**: 파일 선택 (여러 개 가능)

4. "포트폴리오 등록" 클릭
5. 등록 완료 메시지 확인
6. 포트폴리오 목록에서 **⏳ 승인 대기** 상태 확인

### ✅ 확인사항:
- [ ] 파일 업로드 성공
- [ ] 미리보기 이미지 표시
- [ ] 포트폴리오 목록에 등록됨
- [ ] 상태가 "승인 대기"로 표시

---

## 2단계: 관리자 - 포트폴리오 승인

### 로그아웃 후 관리자 로그인
- 우측 상단 프로필 → "로그아웃"
- URL: http://localhost:3000/login
- 아이디: `admin`
- 비밀번호: `admin`

### 포트폴리오 승인
1. 대시보드 → "🛠️ 관리자 페이지" 클릭
2. "콘텐츠 관리" 카드 클릭 (또는 직접 `/admin/portfolios` 접속)
3. **⏳ 승인 대기** 필터에서 방금 등록한 포트폴리오 확인
4. 포트폴리오 정보 확인:
   - 썸네일 이미지
   - 제목, 설명, 가격
   - 디자이너 ID
   - 등록일시

5. **"✅ 승인"** 버튼 클릭
6. 승인 확인 팝업 → "확인"
7. 포트폴리오 목록 새로고침 확인
8. "✅ 승인됨" 필터로 전환하여 승인된 포트폴리오 확인

### ✅ 확인사항:
- [ ] 관리자 페이지 접근 가능
- [ ] 포트폴리오 목록 조회
- [ ] 승인 처리 성공
- [ ] 상태가 "승인됨"으로 변경

---

## 3단계: 광고주 - 포트폴리오 검색 및 문의

### 로그아웃 후 광고주 로그인
- 우측 상단 프로필 → "로그아웃"
- URL: http://localhost:3000/login
- 아이디: `test1234`
- 비밀번호: `1234`

### 포트폴리오 검색
1. 대시보드 → "포트폴리오 검색" 카드 클릭
   (또는 직접 `/portfolios` 접속)
2. 승인된 포트폴리오 목록 확인
3. 방금 승인된 "프리미엄 배너 디자인" 찾기
4. 카테고리 필터 테스트: "배너 디자인" 선택
5. 가격 필터 테스트: 최소 10000 ~ 최대 100000 입력

### 디자이너에게 문의하기 (채팅)
1. 포트폴리오 카드에서 **"💬 문의하기"** 버튼 클릭
2. 채팅방 자동 생성 확인
3. 채팅 페이지로 자동 이동
4. 초기 메시지 확인: "프리미엄 배너 디자인 작품에 대해 문의드립니다."
5. 추가 메시지 입력 및 전송:
   - "안녕하세요! 배너 사이즈는 어떻게 되나요?"
   - "납기는 며칠 걸리나요?"

### ✅ 확인사항:
- [ ] 승인된 포트폴리오만 표시
- [ ] 필터링 기능 작동
- [ ] 채팅방 자동 생성
- [ ] 초기 메시지 자동 입력
- [ ] 채팅 기능 정상 작동

---

## 4단계: 디자이너 - 채팅 응답

### 다시 디자이너로 로그인
- 로그아웃 후 `design1234` / `1234` 로 로그인

### 채팅 확인 및 응답
1. 대시보드 → "채팅" 카드 클릭
2. 새 메시지 확인
3. 광고주와의 채팅방 열기
4. 메시지 응답:
   - "안녕하세요! 문의 감사합니다."
   - "배너는 1920x1080, 1200x628 등 다양한 사이즈로 제공됩니다."
   - "납기는 결제 후 3~5일입니다."

### ✅ 확인사항:
- [ ] 채팅 알림 표시
- [ ] 메시지 실시간 업데이트
- [ ] 양방향 채팅 정상 작동

---

## 5단계: 광고주 - 구매 결정 및 결제

### 다시 광고주로 로그인
- 로그아웃 후 `test1234` / `1234` 로 로그인

### 포트폴리오 구매
1. `/portfolios` 접속
2. "프리미엄 배너 디자인" 포트폴리오 찾기
3. **"🛒 구매하기"** 버튼 클릭
4. 결제 페이지 자동 이동 확인
5. 결제 정보 확인:
   - 상품명: "프리미엄 배너 디자인"
   - 금액: 50,000원
   - 구매자: test1234 정보

### 결제 진행
1. 결제 방법 선택: "신용/체크카드" 
2. 카드 정보 입력:
   - 카드번호: `1234567812345678`
   - 유효기간: `1225` (MMYY)
   - CVC: `123`
   - 소유자명: `테스트`

3. "결제하기" 버튼 클릭
4. 결제 처리 중... (2초 대기)
5. **결제 완료 화면 확인**
   - ✅ 결제 완료!
   - 거래 번호 확인 (#1, #2 등)
   - 3초 후 대시보드로 자동 이동

### ✅ 확인사항:
- [ ] 결제 페이지 이동
- [ ] 상품 정보 정확히 표시
- [ ] 결제 처리 성공
- [ ] 거래 번호 생성
- [ ] 자동 리다이렉트

---

## 6단계: 거래 상태 관리

### 광고주 - 거래 내역 확인
1. 대시보드 → "결제" 카드 클릭 또는 `/transactions` 접속
2. 방금 생성된 거래 확인
3. 거래 정보 확인:
   - 거래 번호
   - 상태: **⏳ 대기중**
   - 금액: 50,000원
   - 디자이너: design1234
   - 거래일

4. **"작업 시작"** 버튼 클릭
5. 상태 변경 확인: **🔄 진행중**

### 디자이너 - 작업 완료 처리
1. 로그아웃 후 `design1234` / `1234` 로 로그인
2. `/transactions` 접속
3. 진행중인 거래 확인
4. **"작업 완료"** 버튼 클릭
5. 상태 변경 확인: **✅ 완료**

### ✅ 확인사항:
- [ ] 거래 내역 목록 조회
- [ ] 상태별 필터링 작동
- [ ] 역할별 버튼 표시 (광고주 vs 디자이너)
- [ ] 상태 변경 성공
- [ ] 실시간 업데이트

---

## 7단계: 관리자 - 전체 모니터링

### 관리자로 로그인
- 로그아웃 후 `admin` / `admin` 로 로그인

### 전체 데이터 확인
1. 관리자 대시보드 확인
2. `/admin/portfolios` - 모든 포트폴리오 상태 확인
3. `/admin/users` - 사용자 목록 확인
4. `/transactions` - 모든 거래 내역 확인 (관리자는 전체 조회 가능)

### ✅ 확인사항:
- [ ] 관리자는 모든 데이터 조회 가능
- [ ] 포트폴리오 승인/거부 가능
- [ ] 사용자 관리 가능
- [ ] 모든 거래 내역 조회 가능

---

## 🎉 전체 프로세스 완료!

### 최종 확인 체크리스트:

#### 디자이너 기능
- [ ] 포트폴리오 등록 (파일 업로드)
- [ ] 내 포트폴리오 목록 조회
- [ ] 상태 확인 (대기/승인/거부)
- [ ] 채팅으로 광고주와 소통
- [ ] 거래 내역 확인
- [ ] 작업 완료 처리

#### 광고주 기능
- [ ] 포트폴리오 검색 및 필터링
- [ ] 디자이너에게 문의 (채팅)
- [ ] 포트폴리오 구매 (결제)
- [ ] 거래 내역 확인
- [ ] 작업 시작 처리

#### 관리자 기능
- [ ] 포트폴리오 승인/거부
- [ ] 사용자 관리
- [ ] 전체 거래 모니터링
- [ ] 플랫폼 통계 확인

#### 시스템 기능
- [ ] 파일 업로드 및 저장
- [ ] 채팅방 자동 생성
- [ ] 거래 자동 생성
- [ ] 상태 관리 자동화
- [ ] 권한 제어
- [ ] 실시간 데이터 업데이트

---

## 🐛 버그 발견 시 확인사항

1. **콘솔 에러 확인** (F12 → Console)
2. **네트워크 요청 확인** (F12 → Network)
3. **데이터베이스 확인**:
   ```sql
   SELECT * FROM portfolios;
   SELECT * FROM transactions;
   SELECT * FROM chat_rooms;
   SELECT * FROM chat_messages;
   ```

4. **서버 로그 확인** (터미널)

---

## 📊 기대 결과

- ✅ 모든 단계가 에러 없이 진행
- ✅ 파일 업로드가 `/public/uploads/portfolios/`에 저장
- ✅ 채팅방이 `chat_rooms` 테이블에 생성
- ✅ 거래가 `transactions` 테이블에 생성
- ✅ 상태 변경이 데이터베이스에 반영
- ✅ 모든 권한 체크가 정상 작동
